"use strict";(()=>{var e={};e.id=332,e.ids=[220,332],e.modules={237:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1370:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>o});var s=r(8732),n=r(2015),i=r(2572),l=e([i]);function o(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),u=async()=>{try{let e=await i.u.get("/health");t(e.data),d(null)}catch(e){d("Failed to check health"),console.error(e)}},p=async()=>{try{let e=await i.u.get("/redis-test");a(e.data.visit_count),d(null)}catch(e){d("Failed to check Redis"),console.error(e)}},h=async e=>{let t=e.target.files?.[0];if(t)try{let e=await (0,i.Q)(t);o(e),d(null)}catch(e){d("File upload failed"),console.error(e)}};return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Flask Backend Interaction"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("button",{onClick:u,className:"bg-blue-500 text-white px-4 py-2 rounded mr-2",children:"Check Health"}),e&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Status: ",e.status]}),e.services&&"object"==typeof e.services&&!Array.isArray(e.services)?(0,s.jsx)("div",{children:Object.entries(e.services).map(([e,t])=>(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)("p",{children:[e,": ",String(t)]})},e))}):e.services&&(0,s.jsxs)("p",{children:["Services: ",e.services.join(", ")]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("button",{onClick:p,className:"bg-green-500 text-white px-4 py-2 rounded mr-2",children:"Check Redis"}),null!==r&&(0,s.jsxs)("p",{children:["Visit Count: ",r]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",onChange:h,className:"mb-2"}),l&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Uploaded File: ",l.file_name]}),(0,s.jsxs)("p",{children:["URL: ",l.blob_url]}),(0,s.jsxs)("p",{children:["Container: ",l.container]})]})]}),c&&(0,s.jsx)("div",{className:"text-red-500 mt-4",children:c})]})}i=(l.then?(await l)():l)[0],a()}catch(e){a(e)}})},1413:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1428:e=>{e.exports=import("axios")},2015:e=>{e.exports=require("react")},2572:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Q:()=>o,u:()=>l});var s=r(1428),n=e([s]);s=(n.then?(await n)():n)[0];let i="";i=process?.env?.BACKEND_URL||"http://backend:8000";let l=s.default.create({baseURL:i,headers:{"Content-Type":"application/json"}}),o=async e=>{let t=new FormData;t.append("file",e);try{return(await l.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("File upload error:",e),e}};a()}catch(e){a(e)}})},3389:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>b,default:()=>h,getServerSideProps:()=>x,getStaticPaths:()=>P,getStaticProps:()=>f,reportWebVitals:()=>m,routeModule:()=>_,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>g});var s=r(3885),n=r(237),i=r(1413),l=r(9616),o=r.n(l),c=r(5504),d=r.n(c),u=r(1370),p=e([u]);u=(p.then?(await p)():p)[0];let h=(0,i.M)(u,"default"),f=(0,i.M)(u,"getStaticProps"),P=(0,i.M)(u,"getStaticPaths"),x=(0,i.M)(u,"getServerSideProps"),b=(0,i.M)(u,"config"),m=(0,i.M)(u,"reportWebVitals"),g=(0,i.M)(u,"unstable_getStaticProps"),j=(0,i.M)(u,"unstable_getStaticPaths"),v=(0,i.M)(u,"unstable_getStaticParams"),y=(0,i.M)(u,"unstable_getServerProps"),S=(0,i.M)(u,"unstable_getServerSideProps"),_=new s.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:d(),Document:o()},userland:u});a()}catch(e){a(e)}})},3873:e=>{e.exports=require("path")},5504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(7020),s=r(8732),n=a._(r(2015)),i=r(4718);async function l(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,i.loadGetInitialProps)(t,r)}}class o extends n.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,s.jsx)(e,{...t})}}o.origGetInitialProps=l,o.getInitialProps=l,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8732:e=>{e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[616],()=>r(3389));module.exports=a})();